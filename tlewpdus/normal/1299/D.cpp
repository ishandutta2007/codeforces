#include <bits/stdc++.h>

using namespace std;

typedef long long ll;
typedef pair<int,int> pii;
typedef pair<ll,ll> pll;

typedef unsigned int uint;

const int INF = 0x3f3f3f3f;
const ll LINF = 0x3f3f3f3f3f3f3f3f;
const ll MOD = 1000000007;

uint pos[] = {1u, 3u, 5u, 9u, 15u, 17u, 33u, 51u, 65u, 85u, 105u, 129u, 153u, 165u, 195u, 255u, 257u, 513u, 771u, 1025u, 1285u, 1545u, 2049u, 2313u, 2565u, 3075u, 3855u, 4097u, 4369u, 4641u, 5185u, 6273u, 8193u, 8481u, 8721u, 9345u, 10305u, 12291u, 13107u, 15555u, 16385u, 16705u, 17025u, 17425u, 18465u, 20485u, 21845u, 23205u, 24585u, 26265u, 26985u, 32769u, 33153u, 33345u, 33825u, 34833u, 36873u, 38505u, 39321u, 40965u, 42405u, 43605u, 49155u, 50115u, 52275u, 61455u, 65535u, 65537u, 131073u, 196611u, 262145u, 327685u, 393225u, 524289u, 589833u, 655365u, 786435u, 983055u, 1048577u, 1114129u, 1179681u, 1310785u, 1572993u, 2097153u, 2162721u, 2228241u, 2359425u, 2621505u, 3145731u, 3342387u, 3932355u, 4194305u, 4259905u, 4325505u, 4456465u, 4718625u, 5242885u, 5570645u, 5898405u, 6291465u, 6684825u, 6881385u, 8388609u, 8454273u, 8519745u, 8650785u, 8912913u, 9437193u, 9830505u, 10027161u, 10485765u, 10813605u, 11141205u, 12582915u, 12779715u, 13369395u, 15728655u, 16711935u, 16777217u, 16843009u, 16908801u, 17040385u, 17303553u, 17829889u, 18882561u, 20987905u, 25198593u, 33554433u, 33620481u, 33685761u, 33818625u, 34079745u, 34611201u, 35655681u, 37781505u, 41959425u, 50331651u, 50529027u, 51121155u, 53489667u, 62963715u, 67108865u, 67175425u, 67241985u, 67371265u, 67633665u, 68173825u, 69238785u, 71307265u, 75505665u, 83886085u, 84215045u, 84544005u, 89149445u, 94412805u, 100663305u, 101058825u, 101254665u, 106991625u, 110125065u, 134217729u, 134285313u, 134349825u, 134480385u, 134742273u, 135299073u, 136331265u, 138420225u, 142610433u, 150994953u, 151389705u, 151587081u, 157310985u, 160469001u, 167772165u, 168102405u, 168428805u, 173056005u, 178278405u, 201326595u, 201526275u, 202113795u, 204521475u, 213921795u, 251658255u, 252645135u, 267448335u, 268435457u, 268505089u, 268574721u, 268713985u, 268992513u, 269484289u, 270533121u, 272630785u, 276826113u, 285212689u, 286331153u, 287449617u, 289686545u, 294160401u, 301989921u, 303178017u, 304157217u, 306742305u, 310659105u, 335544385u, 336871745u, 338199105u, 339809345u, 344074305u, 402653313u, 404259201u, 405029505u, 406987905u, 411113601u, 536870913u, 536944641u, 537006081u, 537165825u, 537411585u, 537920001u, 538968321u, 541067265u, 545260545u, 553648161u, 554832417u, 555819297u, 558385185u, 562332705u, 570425361u, 571548177u, 572657937u, 574916625u, 579355665u, 603979905u, 605569665u, 606372225u, 608311425u, 612443265u, 671088705u, 672432705u, 673726785u, 675358785u, 679613505u, 805306371u, 805515267u, 806141955u, 808452867u, 817892355u, 855638067u, 858993459u, 869059635u, 1006633155u, 1010615235u, 1019428035u, 1073741825u, 1073823745u, 1073905665u, 1074008065u, 1074274305u, 1074791425u, 1075841025u, 1077936385u, 1082130945u, 1090519105u, 1091834945u, 1093150785u, 1094795585u, 1099072065u, 1107296385u, 1108878465u, 1109661825u, 1111654785u, 1115767425u, 1140850705u, 1141982225u, 1143113745u, 1145311505u, 1149772305u, 1207959585u, 1209173025u, 1210140705u, 1212686625u, 1216614945u, 1342177285u, 1342525445u, 1342873605u, 1347421445u, 1352665605u, 1426063445u, 1431655765u, 1437248085u, 1509949605u, 1515890085u, 1520786085u, 1610612745u, 1611042825u, 1611227145u, 1616906505u, 1620051465u, 1711276185u, 1718000025u, 1721329305u, 1761607785u, 1768515945u, 1771476585u, 2147483649u, 2147581953u, 2147631105u, 2147753985u, 2148012033u, 2148534273u, 2149581825u, 2151678465u, 2155872513u, 2164260993u, 2165840001u, 2166629505u, 2168603265u, 2172748161u, 2181038145u, 2182359105u, 2183664705u, 2185331265u, 2189574465u, 2214592545u, 2215790625u, 2216789025u, 2219315745u, 2223251745u, 2281701393u, 2282850321u, 2283947025u, 2286166545u, 2290618641u, 2415919113u, 2416336905u, 2416545801u, 2422212105u, 2425358601u, 2516582505u, 2523502185u, 2526439785u, 2566914201u, 2573624985u, 2576980377u, 2684354565u, 2684723205u, 2685030405u, 2689600005u, 2694841605u, 2768240805u, 2774162085u, 2779096485u, 2852126805u, 2857740885u, 2863289685u, 3221225475u, 3221471235u, 3222024195u, 3224374275u, 3233809155u, 3271557315u, 3275504835u, 3284386755u, 3422552115u, 3425946675u, 3435934515u, 4026531855u, 4027576335u, 4042264335u, 4278190335u, 4294967295u, 0};
const int SZ = 374;
int nxt[SZ+1][SZ+1];
ll D[SZ+1];
ll T[SZ+1];

uint clo(uint v) {
	vector<int> vec;
	v |= 1u;
	for (int i=0;i<32;i++) {
		if (v>>i&1) vec.push_back(i);
	}
	for (int i=0;i<vec.size();i++) {
		for (int j=0;j<i;j++) {
			if (v>>(vec[i]^vec[j])&1) continue;
			v |= 1u<<(vec[i]^vec[j]);
			vec.push_back(vec[i]^vec[j]);
		}
	}
	return v;
}

int n, m;
vector<pii> lis[100100];
map<pii,int> eexi;
pii edg[100100];
int vis[100100];
int val[100100];

vector<int> bas;
void dfs(int here, int p) {
	vis[here] = 1;
	for (pii &e : lis[here]) {
		int there = e.second;
		if (vis[there]==2||there==p) continue;
		if (vis[there]==1) {
			if (there!=0) bas.push_back(val[here]^val[there]^e.first);
			continue;
		}
		val[there] = (val[here]^e.first);
		dfs(there,here);
	}
	vis[here] = 2;
}

int idx(vector<int> bas) {
	if (bas.size()>5) return SZ;
	else {
		for (int i=1;i<(1<<bas.size());i++) {
			int x = 0;
			for (int j=0;j<bas.size();j++) {
				if (i>>j&1) x ^= bas[j];
			}
			if (!x) return SZ;
		}
	}
	uint x = 0;
	for (int i=0;i<bas.size();i++) x |= (1u)<<((uint)bas[i]);
	x = clo(x);
	int ti = SZ;
	for (int i=0;i<=SZ;i++) {
		if (pos[i]==x) {
			ti=i;
		}
	}
	return ti;
}

int main() {
	for (int i=0;i<=SZ;i++) {
		for (int j=0;j<=SZ;j++) {
			if (i==SZ||j==SZ) {
				nxt[i][j] = SZ;
				continue;
			}
			if ((pos[i]&pos[j])!=1u) nxt[i][j] = SZ;
			else {
				int p = clo(pos[i]|pos[j]), good = 0;
				for (int k=0;k<SZ;k++) {
					if (pos[k]==p) {
						nxt[i][j] = k;
						good++;
					}
				}
				assert(good==1);
			}
		}
	}
	scanf("%d%d",&n,&m);
	for (int i=0;i<m;i++) {
		int a, b, c;
		scanf("%d%d%d",&a,&b,&c); --a; --b;
		lis[a].push_back({c,b});
		lis[b].push_back({c,a});
		eexi[{a,b}]=c;
		eexi[{b,a}]=c;
		edg[i] = {a,b};
	}
	D[0] = 1;
	vis[0] = 1;
	for (pii &e : lis[0]) {
		int t1 = e.second, t2 = -1;
		if (vis[t1]) continue;
		for (pii &e2 : lis[t1]) {
			if (e2.second&&eexi.find({0,e2.second})!=eexi.end()) {
				t2 = e2.second;
				break;
			}
		}
		val[t1] = e.first;
		bas.clear();
		dfs(t1,0);
		if (t2<0) {
			memset(T,0,sizeof(T));
			for (int i=0;i<=SZ;i++) T[i] = D[i];
			int ti = idx(bas);
			for (int i=0;i<=SZ;i++) T[nxt[i][ti]] += D[i];
			for (int i=0;i<=SZ;i++) D[i] = T[i]%MOD;
		}
		else {
			int ti = idx(bas);
			bas.push_back(eexi[{0,t1}]^eexi[{0,t2}]^eexi[{t1,t2}]);
			int tj = idx(bas);
			memset(T,0,sizeof(T));
			for (int i=0;i<=SZ;i++) T[i] = D[i];
			for (int i=0;i<=SZ;i++) T[nxt[i][ti]] += 2*D[i];
			for (int i=0;i<=SZ;i++) T[nxt[i][tj]] += D[i];
			for (int i=0;i<=SZ;i++) D[i] = T[i]%MOD;
		}
	}
	ll ans = 0;
	for (int i=0;i<SZ;i++) ans += D[i];
	printf("%lld\n",ans%MOD);

	return 0;
}