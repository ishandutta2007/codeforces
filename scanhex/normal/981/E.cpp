#include <bits/stdc++.h>

using namespace std;

using nagai = long long;

//int mod = 999239239;
int mod;

vector<int> primes = {982451653, 982451707, 982451737, 982451809, 982451819, 982451863, \
982451927, 982451933, 982451941, 982451957, 982452047, 982452073, \
982452091, 982452103, 982452109, 982452131, 982452143, 982452187, \
982452193, 982452197, 982452203, 982452241, 982452257, 982452259, \
982452269, 982452277, 982452283, 982452299, 982452307, 982452349, \
982452377, 982452431, 982452439, 982452473, 982452479, 982452547, \
982452563, 982452629, 982452649, 982452673, 982452677, 982452697, \
982452721, 982452727, 982452739, 982452767, 982452791, 982452841, \
982452847, 982452871, 982452881, 982452901, 982452917, 982452937, \
982453013, 982453033, 982453051, 982453081, 982453099, 982453117, \
982453139, 982453169, 982453177, 982453187, 982453201, 982453217, \
982453229, 982453231, 982453247, 982453253, 982453259, 982453291, \
982453313, 982453363, 982453369, 982453393, 982453397, 982453399, \
982453411, 982453447, 982453453, 982453469, 982453471, 982453517, \
982453541, 982453547, 982453553, 982453567, 982453597, 982453601, \
982453607, 982453651, 982453669, 982453687, 982453699, 982453721, \
982453727, 982453751, 982453841, 982453847, 982453877, 982453883, \
982453903, 982453907, 982453937, 982453973, 982454003, 982454023, \
982454029, 982454041, 982454047, 982454069, 982454107, 982454111, \
982454117, 982454129, 982454159, 982454167, 982454171, 982454173, \
982454183, 982454189, 982454243, 982454251, 982454279, 982454311, \
982454323, 982454359, 982454381, 982454383, 982454461, 982454467, \
982454521, 982454533, 982454579, 982454581, 982454597, 982454639, \
982454651, 982454689, 982454719, 982454723, 982454731, 982454741, \
982454743, 982454777, 982454789, 982454797, 982454827, 982454849, \
982454861, 982454929, 982454947, 982454989, 982454999, 982455037, \
982455049, 982455083, 982455107, 982455119, 982455121, 982455151, \
982455209, 982455217, 982455269, 982455277, 982455311, 982455323, \
982455349, 982455437, 982455469, 982455473, 982455491, 982455493, \
982455497, 982455527, 982455547, 982455559, 982455577, 982455581, \
982455587, 982455599, 982455631, 982455659, 982455671, 982455737, \
982455757, 982455779, 982455791, 982455797, 982455809, 982455847, \
982455863, 982455869, 982455889, 982455911, 982455919, 982455923, \
982455949, 982455983, 982455989, 982456019, 982456043, 982456049, \
982456081, 982456103, 982456117, 982456187, 982456219, 982456243, \
982456253, 982456261, 982456381, 982456399, 982456417, 982456457, \
982456459, 982456481, 982456483, 982456507, 982456511, 982456513, \
982456529, 982456543, 982456603, 982456609, 982456621, 982456669, \
982456721, 982456757, 982456771, 982456777, 982456879, 982456889, \
982456897, 982456903, 982456907, 982456913, 982456931, 982456949, \
982456963, 982457011, 982457017, 982457023, 982457057, 982457059, \
982457089, 982457093, 982457101, 982457107, 982457117, 982457123, \
982457137, 982457153, 982457171, 982457197, 982457219, 982457279, \
982457297, 982457299, 982457303, 982457341, 982457393, 982457473, \
982457477, 982457503, 982457513, 982457519, 982457533, 982457617, \
982457639, 982457653, 982457669, 982457689, 982457717, 982457753, \
982457881, 982457893, 982457923, 982457933, 982457939, 982457963, \
982458013, 982458049, 982458073, 982458079, 982458121, 982458193, \
982458223, 982458229, 982458233, 982458283, 982458307, 982458361, \
982458413, 982458419, 982458439, 982458481, 982458493, 982458511, \
982458527, 982458551, 982458563, 982458569, 982458661, 982458667, \
982458689, 982458709, 982458751, 982458761, 982458779, 982458803, \
982458809, 982458847, 982458871, 982458877, 982458881, 982458889, \
982458901, 982458923, 982458941, 982458943, 982458949, 982458991, \
982459003, 982459033, 982459073, 982459109, 982459139, 982459151, \
982459157, 982459169, 982459171, 982459199, 982459207, 982459213, \
982459249, 982459267, 982459271, 982459279, 982459319, 982459333, \
982459337, 982459411, 982459417, 982459433, 982459453, 982459459, \
982459487, 982459501, 982459523, 982459531, 982459537, 982459573, \
982459591, 982459601, 982459607, 982459613, 982459627, 982459637, \
982459649, 982459669, 982459729, 982459739, 982459811, 982459813, \
982459861, 982459871, 982459889, 982459897, 982459901, 982459921, \
982459931, 982459943, 982459957, 982459963, 982459981, 982459987, \
982459997, 982460009, 982460047, 982460051, 982460119, 982460159, \
982460161, 982460177, 982460183, 982460233, 982460239, 982460263, \
982460279, 982460309, 982460321, 982460383, 982460393, 982460399, \
982460419, 982460461, 982460471, 982460483, 982460497, 982460513, \
982460527, 982460537, 982460539, 982460561, 982460671, 982460681, \
982460707, 982460723, 982460747, 982460771, 982460777, 982460779, \
982460789, 982460807, 982460837, 982460891, 982460917, 982460953, \
982460971, 982460993, 982461001, 982461019, 982461047, 982461131, \
982461149, 982461173, 982461187, 982461191, 982461197, 982461199, \
982461203, 982461251, 982461281, 982461287, 982461317, 982461343, \
982461349, 982461373, 982461379, 982461383, 982461413, 982461419, \
982461427, 982461457, 982461497, 982461503, 982461527, 982461541, \
982461553, 982461559, 982461589, 982461619, 982461647, 982461653, \
982461659, 982461673, 982461679, 982461731, 982461743, 982461757, \
982461761, 982461769, 982461811, 982461817, 982461853, 982461863, \
982461871, 982461877, 982461919, 982461929, 982461947, 982461973, \
982461989, 982462037, 982462069, 982462081, 982462099, 982462111, \
982462121, 982462133, 982462153, 982462193, 982462207, 982462211, \
982462223, 982462253, 982462297, 982462301, 982462357, 982462363, \
982462381, 982462391, 982462417, 982462421, 982462423, 982462433, \
982462471, 982462477, 982462489, 982462499, 982462519, 982462531, \
982462577, 982462597, 982462601, 982462639, 982462669, 982462673, \
982462681, 982462699, 982462717, 982462727, 982462763, 982462781, \
982462843, 982462847, 982462853, 982462891, 982462903, 982462909, \
982462913, 982462919, 982462933, 982462969, 982462973, 982463003, \
982463017, 982463023, 982463029, 982463047, 982463081, 982463087, \
982463089, 982463117, 982463149, 982463179, 982463213, 982463227, \
982463249, 982463263, 982463299, 982463329, 982463333, 982463351, \
982463359, 982463387, 982463389, 982463401, 982463413, 982463431, \
982463437, 982463459, 982463467, 982463477, 982463483, 982463497, \
982463509, 982463539, 982463567, 982463569, 982463593, 982463633, \
982463641, 982463659, 982463681, 982463683, 982463717, 982463773, \
982463789, 982463831, 982463843, 982463863, 982463869, 982463879, \
982463891, 982463917, 982463927, 982463959, 982463981, 982464023, \
982464031, 982464037, 982464083, 982464101, 982464107, 982464137, \
982464139, 982464143, 982464167, 982464169, 982464191, 982464211, \
982464229, 982464271, 982464311, 982464317, 982464337, 982464341, \
982464421, 982464479, 982464487, 982464529, 982464557, 982464563, \
982464583, 982464599, 982464611, 982464643, 982464653, 982464667, \
982464671, 982464677, 982464689, 982464767, 982464823, 982464877, \
982464881, 982464883, 982464907, 982464937, 982464943, 982464961, \
982464979, 982465009, 982465021, 982465027, 982465049, 982465061, \
982465063, 982465067, 982465073, 982465117, 982465123, 982465147, \
982465157, 982465283, 982465291, 982465339, 982465349, 982465381, \
982465417, 982465427, 982465441, 982465453, 982465457, 982465489, \
982465499, 982465507, 982465529, 982465531, 982465559, 982465579, \
982465597, 982465613, 982465663, 982465667, 982465669, 982465709, \
982465721, 982465787, 982465801, 982465811, 982465831, 982465871, \
982465877, 982465943, 982465963, 982465969, 982465987, 982465993, \
982466011, 982466027, 982466029, 982466033, 982466077, 982466081, \
982466083, 982466099, 982466101, 982466123, 982466129, 982466179, \
982466197, 982466213, 982466267, 982466281, 982466297, 982466299, \
982466341, 982466393, 982466399, 982466411, 982466449, 982466453, \
982466467, 982466489, 982466501, 982466503, 982466509, 982466519, \
982466557, 982466599, 982466603, 982466609, 982466651, 982466677, \
982466699, 982466713, 982466717, 982466729, 982466789, 982466833, \
982466899, 982466909, 982466917, 982466921, 982466929, 982466939, \
982466963, 982467007, 982467019, 982467023, 982467049, 982467061, \
982467089, 982467121, 982467131, 982467169, 982467193, 982467197, \
982467203, 982467223, 982467229, 982467289, 982467319, 982467331, \
982467337, 982467359, 982467377, 982467389, 982467391, 982467419, \
982467433, 982467439, 982467449, 982467511, 982467527, 982467533, \
982467547, 982467557, 982467581, 982467583, 982467601, 982467641, \
982467659, 982467691, 982467767, 982467781, 982467803, 982467821, \
982467853, 982467877, 982467881, 982467949, 982468001, 982468021, \
982468037, 982468051, 982468073, 982468099, 982468103, 982468127, \
982468133, 982468147, 982468159, 982468229, 982468231, 982468247, \
982468259, 982468271, 982468297, 982468327, 982468381, 982468423, \
982468433, 982468451, 982468453, 982468463, 982468489, 982468507, \
982468517, 982468519, 982468537, 982468547, 982468559, 982468561, \
982468567, 982468603, 982468633, 982468703, 982468741, 982468763, \
982468769, 982468783, 982468789, 982468793, 982468801, 982468813, \
982468829, 982468841, 982468843, 982468901, 982468951, 982468973, \
982468979, 982468987, 982469027, 982469051, 982469053, 982469063, \
982469069, 982469077, 982469087, 982469123, 982469129, 982469149, \
982469171, 982469207, 982469227, 982469231, 982469261, 982469263, \
982469281, 982469291, 982469317, 982469353, 982469363, 982469377, \
982469381, 982469407, 982469437, 982469443, 982469479, 982469483, \
982469503, 982469513, 982469557, 982469561, 982469563, 982469591, \
982469611, 982469669, 982469687, 982469713, 982469749, 982469759, \
982469773, 982469779, 982469791, 982469809, 982469819, 982469857, \
982469861, 982469893, 982469903, 982469911, 982469923, 982469927, \
982469959, 982469963, 982469987, 982470037, 982470053, 982470059, \
982470061, 982470067, 982470089, 982470113, 982470131, 982470133, \
982470157, 982470161, 982470173, 982470217, 982470233, 982470257, \
982470271, 982470299, 982470311, 982470337, 982470347, 982470371, \
982470403, 982470421, 982470457, 982470473, 982470479, 982470499, \
982470521, 982470527, 982470571, 982470581, 982470617, 982470637, \
982470641, 982470661, 982470701, 982470757, 982470763, 982470803, \
982470821, 982470847, 982470871, 982470883, 982470889, 982470913, \
982470991, 982470997, 982471001, 982471031, 982471051, 982471099, \
982471109, 982471117, 982471141, 982471153, 982471177, 982471199, \
982471211, 982471223, 982471241, 982471277, 982471279, 982471297, \
982471379, 982471403, 982471421, 982471447, 982471453, 982471487, \
982471543, 982471549, 982471603, 982471613, 982471621, 982471639, \
982471649, 982471661, 982471681, 982471687, 982471709, 982471727, \
982471733, 982471739, 982471771, 982471811, 982471813, 982471823, \
982471849, 982471901, 982471949, 982471951, 982471957, 982471991, \
982471999, 982472003, 982472009, 982472011, 982472021, 982472027, \
982472087, 982472089, 982472111, 982472149, 982472171, 982472173, \
982472191, 982472201, 982472219, 982472221, 982472233, 982472269, \
982472287, 982472291, 982472303, 982472321, 982472327, 982472333, \
982472399, 982472423, 982472431, 982472459, 982472461, 982472489, \
982472497, 982472503, 982472509, 982472521, 982472549};

void add(int& a, int b)
{
	a += b;
	if (a < 0)
		a += mod;
	if (a >= mod)
		a -= mod;
}

const int N = 1e4 + 5;

int cnt[N];

void add(int x)
{
	for (int i = N - 1; i >= x; --i)
		add(cnt[i], cnt[i - x]);
}

void rem(int x)
{
	for (int i = x; i <= N - 1; ++i)
		add(cnt[i], -cnt[i - x]);
}


int main()
{
	srand(time(nullptr));
	mod = primes[rand() % primes.size()];
	int n, q;
	cin >> n >> q;
	vector<pair<int, int>> mem;
	for (int i = 0; i < q; ++i)
	{
		int l, r, x;
		cin >> l >> r >> x;
		--l;
		mem.emplace_back(l, x);
		mem.emplace_back(r, -x);
	}
	sort(mem.begin(), mem.end());
	int ptr = 0;
	vector<bool> ok(n + 1);
	++cnt[0];
	for (int i = 0; i < n; ++i)
	{
		while (ptr < mem.size() && mem[ptr].first == i)
		{
			if (mem[ptr].second < 0)
				rem(mem[ptr].second * -1);
			else
				add(mem[ptr].second);
			++ptr;
		}
		for (int j = 1; j <= n; ++j)
			if (cnt[j])
				ok[j] = true;
	}
	cout << count(ok.begin(), ok.end(), true) << '\n';
	for (int i = 1; i <= n; ++i)
		if (ok[i])
			cout << i << ' ';
	cout << '\n';
}