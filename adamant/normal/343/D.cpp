#include <bits/stdc++.h>
using namespace std;const int N = 1 << 19;vector <int> g[N];set <int> s;int L[N],R[N],P[N],a,b,e,n;void f(int v,int p){int t = 0;L[v]=++e;for (int i = 0; i < g[v].size(); i++){int o=g[v][i];if(o!=p){++t;P[o] = v;f(o, v);}}R[v]=++e;if(t==0){s.insert(L[v]);}}main(){cin>>n;while(--n){cin>>a>>b;--a,--b;g[a].push_back(b);g[b].push_back(a);}P[0]=-1;f(0, -1);int q;scanf("%d", &q);set <int>::iterator t;while(q--){cin>>a>>b;--b;if(a==1){if(P[b]!=-1){t=s.lower_bound(L[P[b]]);if(t!=s.end()&&(*t)<=R[P[b]]){s.insert(L[P[b]]);}}s.erase(s.lower_bound(L[b]), s.upper_bound(R[b]));}else if(a==2){s.insert(L[b]);}else{t=s.lower_bound(L[b]);if(t!=s.end()&&(*t)<=R[b]){puts("0");}else{puts("1");}}}}