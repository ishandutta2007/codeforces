#include<cstring>
#include<cstdlib>
#include<cstdio>
#include<cmath>
#include<algorithm>
#include<map>
#include<vector>
#define pb push_back
#define rep(i,j,k) for(int i=(j);i<=(int)k;i++)
#define per(i,j,k) for(int i=(j);i>=(int)k;i--)
#define lowbit(x) ((x)&(-(x)))
#define fi first
#define se second
#define pii pair<int,int>
using namespace std;
typedef long long LL;
typedef double db;
const int jsb=1000000007;
int top=103;
int pos[103]={0x1,0x3,0x4,0x5,0x7,0x9,0xd,0xf,0x13,0x1b,0x27,0x28,0x39,0x3a,0x51,0x55,0x78,0x79,0xae,0xb3,0xff,0x104,0x16b,0x17e,0x219,0x220,0x30c,0x325,0x47a,0x491,0x660,0x6b6,0x96f,0x98f,0xdb3,0xe26,0x1422,0x148c,0x1cad,0x1e32,0x2a72,0x2b03,0x3da4,0x3faa,0x5a96,0x5c75,0x8109,0x87e0,0xbefe,0xc18d,0x1155f,0x11e7c,0x197a0,0x1a00e,0x244a7,0x2636f,0x35b74,0x366fa,0x4e02a,0x5092d,0x72a4d,0x7503e,0xa34ee,0xabf73,0xf1b87,0xf4f64,0x15f0ba,0x16a94a,0x203e59,0x20e916,0x2dee2c,0x305d85,0x43fbde,0x44e541,0x62bb42,0x65f9cc,0x91188f,0x9418e2,0xceafc3,0xd9a4d6,0x131ed64,0x13607a4,0x1bc4aa6,0x1cae415,0x28cee82,0x29a6ff8,0x3a216ec,0x3d365c2,0x560ac3f,0x5732261,0x7cf4fe8,0x811025e,0xb7a3146,0xbb6f7db,0x10596723,0x113749e8,0x1833071a,0x18861ab4,0x2324e791,0x244c8aa6,0x33a5ddb8,0x34b75b59,(int)1e9+7};
int sg[103]={0,1,2,1,2,0,1,2,0,1,2,0,2,1,2,0,2,1,2,0,2,1,2,0,2,1,2,0,2,1,2,0,2,1,2,0,2,1,2,0,2,1,2,0,2,1,2,0,2,1,2,0,2,1,2,0,2,1,2,0,2,1,2,0,2,1,2,0,2,1,2,0,2,1,2,0,2,1,2,0,2,1,2,0,2,1,2,0,2,1,2,0,2,1,2,0,2,1,2,0,2,1,1};
int n,p;
int ans,f[1005][4];
int way[4];
inline int Pow(int a,int b){
	int c=1;
	for(;b;b>>=1,a=a*1ll*a%jsb)if(b&1)c=c*1ll*a%jsb;
	return a;
}
int main(){
	scanf("%d%d",&n,&p);
	for(int i=0;pos[i]<=p;i++){
		int l=pos[i];int r=min(pos[i+1],p);
		int p1=((p-l+p-(r-1))*1ll*(r-l)/2)%jsb;
		way[sg[i]]=(way[sg[i]]+p1)%jsb;
	}
	f[0][0]=1;
	rep(i,1,n)rep(j,0,3)rep(k,0,3)f[i][k]=(f[i][k]+f[i-1][j]*1ll*way[j^k])%jsb;
	rep(i,1,3)ans=(ans+f[n][i])%jsb;
	printf("%d\n",ans);
	return 0;
}