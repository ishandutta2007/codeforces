#pragma GCC optimize(3)
#include<bits/stdc++.h>
using namespace std;char s[105];int t,l,n,i,r,k,j,sb[1005][1005],tmp,no,mx,mid,tmp1,y,xx;int ask(int l,int r){int x;printf("? %d ",r-l+1);for(int i=l;i<=r;i++){printf("%d ",i);}puts("");fflush(stdout);scanf("%d",&x);return x;}int ask2(int x,int n){int y,j,no;printf("? %d ",n-sb[x][0]);for(int i=1;i<=n;i++){no=0;for(j=1;j<=sb[x][0];j++){if(i==sb[x][j]){no=1;break;}}if(no==1){continue;}printf("%d ",i);}puts("");fflush(stdout);scanf("%d",&y);return y;}int main(){scanf("%d",&t);while(t--){scanf("%d%d",&n,&k);l=1;r=n;no=0;for(i=1;i<=k;i++){scanf("%d",&sb[i][0]);for(j=1;j<=sb[i][0];j++){scanf("%d",&sb[i][j]);}}tmp=ask(l,r);while(l!=r){mid=(l+r)/2;tmp1=ask(l,mid);if(tmp1==tmp){r=mid;}else{l=mid+1;}}for(i=1;i<=k;i++){for(j=1;j<=sb[i][0];j++){if(sb[i][j]==l){xx=i;goto aaa;}}}aaa:y=ask2(xx,n);printf("! ");for(i=1;i<=k;i++){no=0;for(j=1;j<=sb[i][0];j++){if(sb[i][j]==l){no=1;}}(no==0)?printf("%d ",tmp):printf("%d ",y);}puts("");fflush(stdout);scanf("%s",&s);fflush(stdout);}}