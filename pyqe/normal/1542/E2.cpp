#include <bits/stdc++.h>

using namespace std;

const long long ma=15e4;
long long n,d,fc[569],cb[569][569],dp[2][2][300069],dv;

int main()
{
	long long i,j,ii,sm,sm2,sm3,z=0;
	
	scanf("%lld%lld",&n,&dv);
	fc[0]=1;
	cb[0][0]=1;
	for(i=1;i<=n;i++)
	{
		fc[i]=fc[i-1]*i%dv;
		for(j=0;j<=i;j++)
		{
			cb[i][j]=cb[i-1][j];
			if(j)
			{
				cb[i][j]=(cb[i][j]+cb[i-1][j-1])%dv;
			}
		}
	}
	dp[0][0][ma]=1;
	for(i=1;i<=n;i++)
	{
		d=i*(i-1)/2;
		for(ii=0;ii<2;ii++)
		{
			sm=0;
			sm2=0;
			sm3=0;
			for(j=-i+1;j<=i-1;j++)
			{
				if(j<=0)
				{
					sm+=dp[0][ii][ma-d+j];
					if(sm>=dv)
					{
						sm-=dv;
					}
				}
				else
				{
					sm2+=dp[0][ii][ma-d+j];
					if(sm2>=dv)
					{
						sm2-=dv;
					}
				}
				sm3=(sm3+dp[0][ii][ma-d+j]*(i-1-abs(j)))%dv;
			}
			for(j=-d;j<=d;j++)
			{
				dp[1][ii][ma+j]+=sm3;
				if(dp[1][ii][ma+j]>=dv)
				{
					dp[1][ii][ma+j]-=dv;
				}
				dp[1][0][ma+j]+=sm;
				if(dp[1][0][ma+j]>=dv)
				{
					dp[1][0][ma+j]-=dv;
				}
				dp[1][1][ma+j]+=sm2;
				if(dp[1][1][ma+j]>=dv)
				{
					dp[1][1][ma+j]-=dv;
				}
				sm-=dp[0][ii][ma+j-i+1];
				if(sm<0)
				{
					sm+=dv;
				}
				sm3+=sm2-sm;
				if(sm3>=dv)
				{
					sm3-=dv;
				}
				if(sm3<0)
				{
					sm3+=dv;
				}
				sm+=dp[0][ii][ma+j+1];
				if(sm>=dv)
				{
					sm-=dv;
				}
				sm2+=dp[0][ii][ma+j+i]-dp[0][ii][ma+j+1];
				if(sm2>=dv)
				{
					sm2-=dv;
				}
				if(sm2<0)
				{
					sm2+=dv;
				}
			}
		}
		for(ii=0;ii<2;ii++)
		{
			for(j=-d;j<=d;j++)
			{
				dp[0][ii][ma+j]=dp[1][ii][ma+j];
				dp[1][ii][ma+j]=0;
			}
		}
		sm=0;
		for(j=1;j<=d;j++)
		{
			sm+=dp[0][1][ma+j];
			if(sm>=dv)
			{
				sm-=dv;
			}
		}
		z=(z+sm*cb[n][i]%dv*fc[n-i])%dv;
	}
	printf("%lld\n",z);
}