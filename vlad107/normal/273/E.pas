{$r-,q-,s-,i-,o+}
const
  base=1000000007;
  kt=102;
  t:array[1..kt]of longint=(1,3,4,5,7,9,13,15,19,27,39,40,57,58,81,85,120,121,174,179,255,260,363,382,537,544,780,805,1146,1169,1632,1718,2415,2447,3507,3622,5154,5260,7341,7730,10866,11011,15780,16298,23190,23669,33033,34784,48894,49549,71007,73340,104352,106510,148647,156527,220020,222970,319530,330029,469581,479294,668910,704371,990087,1003364,1437882,1485130,2113113,2156822,3010092,3169669,4455390,4515137,6470466,6683084,9509007,9705698,13545411,14263510,20049252,20318116,29117094,30073877,42790530,43675640,60954348,64185794,90221631,91431521,131026920,135332446,192557382,196540379,274294563,288836072,405997338,411441844,589621137,608996006,866508216,884431705);
  q:array[1..kt]of longint=(0,1,2,1,2,0,1,2,0,1,2,0,2,1,2,0,2,1,2,0,2,1,2,0,2,1,2,0,2,1,2,0,2,1,2,0,2,1,2,0,2,1,2,0,2,1,2,0,2,1,2,0,2,1,2,0,2,1,2,0,2,1,2,0,2,1,2,0,2,1,2,0,2,1,2,0,2,1,2,0,2,1,2,0,2,1,2,0,2,1,2,0,2,1,2,0,2,1,2,0,2,1);

var
  f:array[0..1111,0..3]of longint;
  l,r,n,i,p,j,s:longint;
  u:array[0..3]of longint;

begin
  read(n,p);
  for i:=1 to kt do begin
    if (t[i]>p)then break;
    if (i=kt)then r:=p else r:=t[i+1]-1;
    l:=t[i];
    if (r>p)then r:=p;
    u[q[i]]:=(u[q[i]]+((int64(2)*p-r-l)*(r-l+1) div 2))mod base;
  end;
  f[0][0]:=1;
  for i:=0 to n-1 do 
    for j:=0 to 3 do 
      for s:=0 to 2 do 
        f[i+1][j xor s]:=(f[i+1][j xor s]+int64(f[i][j])*u[s])mod base;
  writeln((int64(f[n][1])+f[n][2]+f[n][3]) mod base);
end.