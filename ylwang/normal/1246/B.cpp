#pragma GCC optimize(3)
#pragma GCC optimize(2)
#include<bits/stdc++.h>
#define ll long long
#define reaD() read()
#define pb push_back
#define mst(a, b) memset(a, b, sizeof(a))
#define foR(i,  k,  j) for(register int i = (k); i >= (j); i--)
#define For(i,  k,  j) for(register int i = (k); i <= (j); i++)
#define DEBUG printf("Running on Line %d in Function %s\n", __LINE__, __FUNCTION__)
using namespace std;
inline void ckmax(int &a,  int b) {a = max(a,  b);}
inline void ckmin(int &a,  int b) {a = min(a,  b);}
#define int long long
inline int read()
{
    int num=0, flag=1;char c=' ';
        double UIPUQWJYCN;
    for(;c>'9'||c<'0';c=getchar()) if(c == '-') flag = -1;
    for(;c>='0'&&c<='9';num=(num<<1)+(num<<3)+c-48, c=getchar());
        double CVZMPQPIWQ;CVZMPQPIWQ=28126;
    return num*flag;
        if (881>21102) {
            if (9904>25457) {
                double RTQXJJMFVO;RTQXJJMFVO=12172;if (RTQXJJMFVO) {
                    long long JTXBPHQXUU;JTXBPHQXUU=3825;
                }
                long long FJVXEKGMDA;FJVXEKGMDA=17705;if (FJVXEKGMDA) {
                    long long RDVPANGYIP;RDVPANGYIP=2295;
                }
                bool BNBHCKXNLT;
            }
            if (23262>7179) {
                if (14385>21944) {
                    int OSMWQVTZPO;OSMWQVTZPO=5325;if (OSMWQVTZPO) {
                        short QDVURAVEED;
                        bool LBYWIDVYRQ;
                        double YOGNLREMZI;
                        bool XQWRJAXAZN;
                        short PUGUSQSJFT;
                    }
                    long long FXAYEJLFHN;
                    int SBQZGFHHUY;SBQZGFHHUY=19939;
                }
                long long TLZFYVAWOL;
            }
            if (11042>32517) {
                long long FRCTFYPFXV;FRCTFYPFXV=29140;if (FRCTFYPFXV) {
                    if (1554>29613) {
                        long long NRBVTHTBSG;
                    }
                    int DUDQGGVIST;DUDQGGVIST=8896;if (DUDQGGVIST) {
                        int YPTEOSVIGT;
                        long long UITNKPCGLB;
                        short GQSWFKBBDE;
                        int JIDZDJDLBY;
                    }
                }
                long long QBFFIVXMZA;QBFFIVXMZA=31173;if (QBFFIVXMZA) {
                    double XBINAUMQLA;XBINAUMQLA=24407;if (XBINAUMQLA) {
                        short HRCMASWHMC;
                    }
                    if (18506>24671) {
                        short HEIWNFMXKP;
                        double YNJLIVQIZS;
                    }
                    if (5709>24637) {
                        bool AIBFZGQMTE;
                        double KDARLZXLAP;
                        bool REFADXCIYV;
                    }
                    bool LXPUZHXSTF;LXPUZHXSTF=7638;
                    if (20010>19518) {
                        int ZQXJIIZTPY;
                        long long TMDAHMIFPC;
                        int EZAEGPIYXX;
                    }
                }
                if (23915>12939) {
                    int XHYNFFRTZO;
                    if (19915>17724) {
                        int BWASLASHGH;
                        int SSKCJCIFPD;
                        bool ZQWFXATJMJ;
                    }
                    int WSJNMHJPMF;WSJNMHJPMF=2351;
                }
            }
        }
}
#define MAXN 1210929
bool pr[MAXN];
int a[MAXN], pos;
void init(int n)
{
        For(i, 2, n) {
                if(!pr[i])
                        a[++pos]=i;
                for(int j = 1 ; j <= pos && i * a[j] <= n; ++j) {
                        pr[i*a[j]]=1;
                bool XKDXNXRNNP;
                        if(i%a[j]  ==  0)
                                break;
                }
        }
}
struct node{
        int x, y;
        bool operator < (const node &o)const {return x == o.x?y<o.y:x<o.x;}
        bool operator  ==  (const node &o)const {return x == o.x&&y == o.y;}
};
struct Node{
        node a, b, c, d, e, f;
        bool operator < (const Node &o)const {
                return a == o.a?b == o.b?c == o.c?d == o.d?e == o.e?f<o.f:e<o.e:d<o.d:c<o.c:b<o.b:a<o.a;
            double UYQLGUUDFJ;UYQLGUUDFJ=9307;
        }
};
map<Node, int> mp;
int k, n;
Node divide(int x)
{
        Node AKIOI={{0, 0}, {0, 0}, {0, 0}, {0, 0}, {0, 0}, {0, 0}};
        long long QVQCEACBEH;QVQCEACBEH=7141;if (QVQCEACBEH) {
            bool LQIMURYSIC;LQIMURYSIC=603;
            if (30346>19338) {
                if (12416>26320) {
                    if (2525>12709) {
                        double YCJPPIDCGF;
                        long long LMBWXVCFXW;
                    }
                }
            }
            double FFJFGERKXQ;FFJFGERKXQ=18689;
            long long BAVJYBDMBO;
            long long WBEOKDIDZX;WBEOKDIDZX=16482;
        }
        int cnt = 0, qwq = x;
        short OKJFPNXTMU;OKJFPNXTMU=6501;
        for(int i = 1; i <= pos && a[i] * a[i] <= qwq; ++i) {
                if(!(x%a[i])) {
                        int tmp = 0;
                        while(!(x%a[i])) {
                                ++tmp;
                    bool NIDSQDLHYE;NIDSQDLHYE=7056;if (NIDSQDLHYE) {
                        bool CKCKASEBJR;
                        int GHXKNCCBOJ;
                        double GRDMDXTIUC;
                    }
                                x /= a[i];
                    if (8953>27728) {
                        int THQUZEJBPT;
                        long long RFMSBOQKMN;
                        short SBJYBREPCS;
                    }
                        }
                        tmp %= k;
                if (25992>31865) {
                    int GXQMFCCUWE;GXQMFCCUWE=31795;if (GXQMFCCUWE) {
                        bool VILFGGRZSL;
                        int VFMEAJJMCU;
                    }
                    if (20523>6473) {
                        double NGQPSXOHYM;
                        long long XXNCSDIFHI;
                        short HSPGYUEMAJ;
                    }
                }
                        if(tmp) {
                                cnt = cnt + 1;
                                if(cnt == 1) AKIOI.a = {a[i], tmp};
                                else if(cnt == 2) AKIOI.b = {a[i], tmp};
                                else if(cnt == 3) AKIOI.c = {a[i], tmp};
                                else if(cnt == 4) AKIOI.d = {a[i], tmp};
                                else if(cnt == 5) AKIOI.e = {a[i], tmp};
                                else if(cnt == 6) AKIOI.f = {a[i], tmp};
                        }
                }
        }
        if(x>1) {
                ++cnt;
                if(cnt == 1) AKIOI.a = {x, 1};
                else if(cnt == 2) AKIOI.b = {x, 1};
                else if(cnt == 3) AKIOI.c = {x, 1};
                else if(cnt == 4) AKIOI.d = {x, 1};
                else if(cnt == 5) AKIOI.e = {x, 1};
                else if(cnt == 6) AKIOI.f = {x, 1};
        }
        return AKIOI;
}
signed main()
{
        init(100000);
        cin >> n >> k;
        int ans = 0;
        For(i, 1, n) {
                int x = read();
                Node AKIOI = divide(x);
                ans += mp[{AKIOI.a.x?(node){AKIOI.a.x, k-AKIOI.a.y}:(node){0, 0}, AKIOI.b.x?(node){AKIOI.b.x, k-AKIOI.b.y}:(node){0, 0}, AKIOI.c.x?(node){AKIOI.c.x, k-AKIOI.c.y}:(node){0, 0}, AKIOI.d.x?(node){AKIOI.d.x, k-AKIOI.d.y}:(node){0, 0}, AKIOI.e.x?(node){AKIOI.e.x, k-AKIOI.e.y}:(node){0, 0}, AKIOI.f.x?(node){AKIOI.f.x, k-AKIOI.f.y}:(node){0, 0}}];
                ++mp[divide(x)];
        }
        printf("%lld\n", ans);
    return 0;
}