#include <iostream>
#include <string>
#include <map> 
#include <math.h>
#include <vector>
#include <algorithm>
#include <cstdio>
#include <set>
#include <queue>
#include <sstream>
#include <deque>
#include <memory.h>


using namespace std;

#define ll long long
#pragma comment(linker, "/STACK:64000000")

const int maxn = 1 << 17;
const int inf = 1000000007;
const int mod = 1000000007;

int n, a[maxn], p;
//char gr[1000000002];
//const int lol[][2] = {{1,0},{2,1},{3,2},{4,1},{5,2},{6,0},{8,2},{9,1},{11,0},{16,1},{23,2},{24,0},{33,2},{34,1},{48,2},{49,0},{72,1},{102,2},{107,0},{147,2},{152,1},{216,2},{220,0},{321,2},{323,1},{456,2},{481,0},{660,2},{683,1},{969,2},{989,0},{1443,2},{1453,1},{2049,2},{2164,0},{2967,2},{3073,1},{4359,2},{4450,0},{6492,2},{6538,1},{9219,2},{9737,0},{13350,2},{13828,1},{19614,2},{20024,0},{29211,2},{29420,1},{41484,2},{43816,0},{60072,2},{62225,1},{88260,2},{90107,0},{131448,2},{132389,1},{186675,2},{197171,0},{270321,2},{280012,1},{397167,2},{405481,0},{591513,2},{595750,1},{840036,2},{887269,0},{1216443,2},{1260053,1},{1787250,2},{1824664,0},{2661807,2},{2680874,1},{3780159,2},{3992710,0},{5473992,2},{5670238,1},{8042622,2},{8210987,0},{11978130,2},{12063932,1},{17010714,2},{17967194,0},{24632961,2},{25516070,1},{36191796,2},{36949441,0},{53901582,2},{54287693,1},{76548210,2},{80852372,0},{110848323,2},{114822314,1},{162863079,2},{166272484,0},{242557116,2},{244294618,1},{344466942,2},{363835673,0},{498817452,2},{516700412,1},{732883854,2},{748226177,0},{1000000001,3}};
const int lol[][2] = {{1,0},{3,1},{4,2},{5,1},{7,2},{9,0},{13,1},{15,2},{19,0},{27,1},{39,2},{40,0},{57,2},{58,1},{81,2},{85,0},{120,2},{121,1},{174,2},{179,0},{255,2},{260,1},{363,2},{382,0},{537,2},{544,1},{780,2},{805,0},{1146,2},{1169,1},{1632,2},{1718,0},{2415,2},{2447,1},{3507,2},{3622,0},{5154,2},{5260,1},{7341,2},{7730,0},{10866,2},{11011,1},{15780,2},{16298,0},{23190,2},{23669,1},{33033,2},{34784,0},{48894,2},{49549,1},{71007,2},{73340,0},{104352,2},{106510,1},{148647,2},{156527,0},{220020,2},{222970,1},{319530,2},{330029,0},{469581,2},{479294,1},{668910,2},{704371,0},{990087,2},{1003364,1},{1437882,2},{1485130,0},{2113113,2},{2156822,1},{3010092,2},{3169669,0},{4455390,2},{4515137,1},{6470466,2},{6683084,0},{9509007,2},{9705698,1},{13545411,2},{14263510,0},{20049252,2},{20318116,1},{29117094,2},{30073877,0},{42790530,2},{43675640,1},{60954348,2},{64185794,0},{90221631,2},{91431521,1},{131026920,2},{135332446,0},{192557382,2},{196540379,1},{274294563,2},{288836072,0},{405997338,2},{411441844,1},{589621137,2},{608996006,0},{866508216,2},{884431705,1},{1000000001, 3}};
int cnt[3];
int d[maxn][4];

int mex(int x, int y) {
	if (x != 0 && y != 0) return 0;
	if (x != 1 && y != 1) return 1;
	return 2;
}

int sum(int n, int a) {
	ll res = 1LL * (2 * a - (n - 1)) * n / 2;
	return res % mod;
}

int main() {
#ifndef ONLINE_JUDGE
	freopen("input.txt", "r", stdin);
	freopen("output.txt", "w", stdout);
#endif
    
	cin >> n >> p;

	for (int i = 0; i < 103; i++) if (lol[i][0] <= p - 1) {
		int l = lol[i][0], r = min(lol[i + 1][0] - 1, p - 1);
		int res = sum(r - l + 1, p - l);
		cnt[lol[i][1]] = (cnt[lol[i][1]] + res) % mod;
	}

	d[0][0] = 1;
	for (int i = 0; i < n; i++) {
		for (int j = 0; j < 4; j++) {
			for (int k = 0; k < 3; k++) {
				d[i + 1][j ^ k] = (d[i + 1][j ^ k] + 1LL * d[i][j] * cnt[k]) % mod;
			}
		}
	}

	cout << (0LL + d[n][1] + d[n][2] + d[n][3]) % mod;

	/*cin >> n;
	int res = 0;
	for (int i = 0; i < n; i++) {
		cin >> a[i];
		int x = bin(a[i]);
		res ^= x;
	}
	cout << (res ? */

	/*int last = 0;
	gr[0] = gr[1] = gr[2] = 0;
	for (int i = 3; i <= 1000000001; i++) {
		gr[i] = mex(gr[2 * (i / 3) - (i / 3)], gr[i - (i / 3)]);
		if (i == 1000000001) gr[i] = 3;
		if (gr[i] != gr[last]) {
			//cout << last << "-" << i - 1 << " : " << i - last << " (" << gr[last] << ")" << endl;
			cout << "{" << last << "," << (int)gr[last] << "},";
			last = i;
		}
	}*/
	

	return 0;
}