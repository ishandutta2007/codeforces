#include<bits/stdc++.h>
char ch[4][4];
int X=0,O=0;
int XX(int x,int y){
	return ch[x][y]=='X';
}
int OO(int x,int y){
	return ch[x][y]=='0';
}
signed main(){
	scanf("%s",ch[1]+1);
	scanf("%s",ch[2]+1);
	scanf("%s",ch[3]+1);
	X=XX(1,1)+XX(1,2)+XX(1,3)+XX(2,1)+XX(2,2)+XX(2,3)+XX(3,1)+XX(3,2)+XX(3,3);
	O=OO(1,1)+OO(1,2)+OO(1,3)+OO(2,1)+OO(2,2)+OO(2,3)+OO(3,1)+OO(3,2)+OO(3,3);
	//std::cout<<X<<" "<<O;
	if(X-O>=2||O>X||
	(((XX(1,1)&&XX(1,2)&&XX(1,3))||
	(XX(2,1)&&XX(2,2)&&XX(2,3))||
	(XX(3,1)&&XX(3,2)&&XX(3,3))||
	(XX(1,1)&&XX(2,1)&&XX(3,1))||
	(XX(1,2)&&XX(2,2)&&XX(3,2))||
	(XX(1,3)&&XX(2,3)&&XX(3,3))||
	(XX(1,1)&&XX(2,2)&&XX(3,3))||
	(XX(3,1)&&XX(2,2)&&XX(1,3)))
	&&((OO(1,1)&&OO(1,2)&&OO(1,3))||
	(OO(2,1)&&OO(2,2)&&OO(2,3))||
	(OO(3,1)&&OO(3,2)&&OO(3,3))||
	(OO(1,1)&&OO(2,1)&&OO(3,1))||
	(OO(1,2)&&OO(2,2)&&OO(3,2))||
	(OO(1,3)&&OO(2,3)&&OO(3,3))||
	(OO(1,1)&&OO(2,2)&&OO(3,3))||
	(OO(3,1)&&OO(2,2)&&OO(1,3))))
	||(((OO(1,1)&&OO(1,2)&&OO(1,3))||
			(OO(2,1)&&OO(2,2)&&OO(2,3))||
			(OO(3,1)&&OO(3,2)&&OO(3,3))||
			(OO(1,1)&&OO(2,1)&&OO(3,1))||
			(OO(1,2)&&OO(2,2)&&OO(3,2))||
			(OO(1,3)&&OO(2,3)&&OO(3,3))||
			(OO(1,1)&&OO(2,2)&&OO(3,3))||
			(OO(3,1)&&OO(2,2)&&OO(1,3)))
			&&X==O+1)
	||(((XX(1,1)&&XX(1,2)&&XX(1,3))||
			(XX(2,1)&&XX(2,2)&&XX(2,3))||
			(XX(3,1)&&XX(3,2)&&XX(3,3))||
			(XX(1,1)&&XX(2,1)&&XX(3,1))||
			(XX(1,2)&&XX(2,2)&&XX(3,2))||
			(XX(1,3)&&XX(2,3)&&XX(3,3))||
			(XX(1,1)&&XX(2,2)&&XX(3,3))||
			(XX(3,1)&&XX(2,2)&&XX(1,3)))
			&&X==O)
	)
		printf("illegal");
	else if((XX(1,1)&&XX(1,2)&&XX(1,3))||
			(XX(2,1)&&XX(2,2)&&XX(2,3))||
			(XX(3,1)&&XX(3,2)&&XX(3,3))||
			(XX(1,1)&&XX(2,1)&&XX(3,1))||
			(XX(1,2)&&XX(2,2)&&XX(3,2))||
			(XX(1,3)&&XX(2,3)&&XX(3,3))||
			(XX(1,1)&&XX(2,2)&&XX(3,3))||
			(XX(3,1)&&XX(2,2)&&XX(1,3)))
		printf("the first player won");
	else if((OO(1,1)&&OO(1,2)&&OO(1,3))||
			(OO(2,1)&&OO(2,2)&&OO(2,3))||
			(OO(3,1)&&OO(3,2)&&OO(3,3))||
			(OO(1,1)&&OO(2,1)&&OO(3,1))||
			(OO(1,2)&&OO(2,2)&&OO(3,2))||
			(OO(1,3)&&OO(2,3)&&OO(3,3))||
			(OO(1,1)&&OO(2,2)&&OO(3,3))||
			(OO(3,1)&&OO(2,2)&&OO(1,3)))
		printf("the second player won");
	else if(X+O==9)
		printf("draw");
	else if(X==O)
		printf("first");
	else if(X==O+1)
		printf("second");
}