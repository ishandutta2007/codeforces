/*
##@@@@##@@@##@@@@##@@###o#o######@####@@@###############oo##########oo#########################@@######@@@@@@#####o.....
o#####################ooooo##########################oooooo###ooo###oooo##########################################o.....
######################oo##############################oooo##########ooooo#############################oo############....
#####################ooo###############################ooo##########ooooooooo########################################...
#####################oo################################ooo##########oo...oo..oo###o###################################oo
####################oo#################################ooo########oooo......ooo###oo##################################@#
##########o#########oo#################################ooo#######oooo.......oo####ooo###oo#############################@
#####ooo#######################o######o################ooo#######oooo.......oo##oooooo##oo#############################@
###ooooo######################oo######o##################o######oooo..........oooooo.o###oo############################@
##oooooo######################ooo####ooo#####################o##oooo....oo.....oooooo####@################oo############
#ooooooo######################ooo##oooooo###################oo#oooo...oo.......oo#@@@@###@@@############################
ooooooo#######################oooo#ooooo.##################oooooooo..o.......o####@@@@##ooo#######################@#####
oooooo########################ooo.oooooo..oo#############ooo.ooooo.........o#@@@@@@@@@@##o..o###########################
#oooo#########################ooooo###ooooo#############ooo..ooooo.......o#@@@@@@@@@@@@#@#...ooo#####################o##
oooo##########################ooo..ooooo...o###########oooo..oooo........o@#####@@@@@#@@@@#...ooo#######################
oooo#####################o####oo....oooo....ooo########oooo..ooo.........ooo####@@##@@@###o...ooo#################@@@###
ooo#####################ooo###ooooooo####ooooo########oooo...oo................##@###@###....ooooo################@@####
#o######################oooo###@@@@@@@#@@@@@@#oo#####ooooo...o...............ooo######oo#oo..oooo##oo#############@@@###
########################oo##@#####@@@@@@@@@@@@#oo###oooooo...................o##ooooo..oooo..oooo##ooo############@@@@##
##########..oo###########o#@@##o#@@@@@@@@@@@@@@#ooooooooo.....................oooo....ooo....ooooooooo############@@####
##########o.oo##########oo@@ooo#@@###@@@@@@@@@@o...oooooo....................................oooooooooo###########@@####
########################o#@#oo.o@@###@@@##@@###o.....oooo...................................ooooooooooo###########@@####
##############o##########@@#o...ooo###@@#o#@##o........oo...................................oooooooooooo##########@@####
##########oo#oo############@#o......####@###ooo##...........................................ooo.o.ooooo##o########@@@@##
##########oo##o##########ooo##o...ooo#oooooo..oo...........................................ooo.....ooooooo#######@@#@@##
########@@####oo#########o....o...o####oo..................................................oo......oooo#oo#######@######
#######@@@####oo########ooo.........oooo...........................................................ooooooo#######@######
#######@@@####oo#########oo........................................................................oooo#o###############
#######@@@@####o#########ooo......................................................................ooooo#################
#######@@@@####oo#######ooooo.....................................................................oooo###############ooo
######@@@@#####oo#######oooooo...................................................................ooooo#############ooooo
######@@@@#@####o#######oo.oo...................................................................ooooo############oooooo.
######@@@########o######o......................................................................oooooo#############ooo...
###o##@@@########oo####o.....................................................................oo####o###############o....
###o##@@#@#@@####oo###o........oooo.........................................................oo############o####oo.o.....
##oo##@@##@@######oo###o...........oo.....................................................oo#o###########oo###ooo.......
##ooo#@##@@#######ooo###oooo.......oooo.................................................oo###################ooo........
##ooo###@@#########oo###o###############o..............................................oo#############o##o##ooo.........
##ooo###@###########oo############@########oo........................................oooo#############oo#o#oooo.........
##ooo################oo###########@############ooo....................................ooo########ooo####oooooo..........
###ooo################oo#######@@@@@#################oooo............................oooo########ooo####oo..............
###ooo#################o#######@@@@@########################ooo.....................oooooo##@@@@@##########o............
####ooo#################o#######@@@#############@###########ooo..........oo........ooooooo#@@@@@@@@@####ooo#o...........
####ooo#ooooooo#################@@@#############@############oooo..................oooooo##@##@@@@####@@##ooooo.........
####ooooooooo.o#################@@@#############@#############oooo..................oo###@@@@@#####@@@@@@@#oooo.........
#####oooooo..###################@@############################oooo.................o##@@@######@@@@@@####oooooo.........
#####ooooo.o####################@@@@###########################ooo...............o##@@##ooo##@@@@##ooooooooo............
######ooooo################################################@@@@ooo............oo#####ooo##@@@##oooooooo.................
###ooooooo####@###################o#######################@@@@@#oo..........o#####ooo##@@###oooooo......................
#ooooo.o#oo###############oooo###############o##########@@@@@@@@o.........o#####ooo##@###ooo............................
ooooo..######@##########oooo.o############oooo#######oo#@@@@@@@#o.......o####ooo##@###ooo...............................
ooo..o#################oooo..############oooo.o##o###oo##@@@@@#oo.....o###ooo######ooo..................................
oo..o######@##########oooo..o###########oooo..o#ooo##@@#o#@@@##ooo.oo###ooo###@##oo.....................................
o..o######@@#@#@#####oooo...o##########oooo....#ooo##@#@#oo#@#@##ooooo#oo######o........................................
..#######@@#########oooo....##########oooo.....ooooo##@#@@#o##oooooooo.oo###o...........................................
.########@#########oooo....o#########ooooo......oooooo####@#ooooo.ooo....oo.............................................
##################oooo.....#########oooooo......oooooooo####o...........................................................
#######@@#########ooo.....o########ooooooo.........ooo...o#.............oo..............................................
######@@#########ooo......o####ooo.....................oo##o.........o#####o............................................
####@@@@@@@######ooo.....oooo.....................ooooo####oooooo##oo########oo.........................................
*/
#include<bits/stdc++.h>
using namespace std;
#define ll long long 
#define dbg(x) cerr<<#x<<": "<<x<<endl;
// #define int long long

ll mypow(ll a,ll b,ll mod){
    ll ret=1;
    while(b){
        if(b&1)ret=ret*a%mod;
        a=a*a%mod;b>>=1;
    }
    return ret;
}
int a[1000010];
int b[1000010];
vector<int> vec[1000010];
signed main(){
    ios::sync_with_stdio(0);cin.tie(0);
    int t;cin>>t;
    while(t--){
        int n,k;cin>>n>>k;
        for(int i=0;i<k;i++)a[i]=0,vec[i].clear();
        int cnt=0;string s;cin>>s;
        for(int i=0;i<n;i++){
            if(s[i]=='1')a[i%k]++,cnt++,vec[i%k].push_back(i/k);
        }
        int ans=1e9;
        for(int i=0;i<k;i++){
            sort(vec[i].begin(),vec[i].end());
            int sz=vec[i].size();
            int tmp=cnt-a[i]+sz;
            for(int i=0;i<=n/k;i++)b[i]=0;
            for(auto &it:vec[i])b[it]=1;
            for(int i=1;i<=n/k;i++)b[i]+=b[i-1];
            for(int i=0;i<=n/k;i++)b[i]=i-2*b[i];
            int maxn=-1;int minn=0;
            for(int i=0;i<=n/k;i++){
                minn=min(minn,b[i]-maxn);
                maxn=max(maxn,b[i]);
                // cout<<i<<" "<<b[i]<<" "<<maxn<<endl;
            }
            tmp+=minn;
            // cout<<minn<<endl;
            ans=min(ans,tmp);
        }
        cout<<ans<<endl;
    }
}